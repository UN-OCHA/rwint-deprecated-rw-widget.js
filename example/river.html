<!DOCTYPE html>
<html>
<head>
  <title>River Widget</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF8">
  <link rel="stylesheet" href="css/styles.css" />
  <script type="text/javascript" src="../bower_components/d3/d3.js"></script>
  <script type="text/javascript" src="../bower_components/jquery/dist/jquery.js"></script>
  <script type="text/javascript" src="../bower_components/jquery-selectric/dist/jquery.selectric.js"></script>
  <script type="text/javascript" src="../bower_components/moment/moment.js"></script>
  <script type="text/javascript" src="../bower_components/handlebars/handlebars.js"></script>
  <script type="text/javascript" src="../bower_components/lodash/dist/lodash.js"></script>
  <script type="text/javascript" src="../bower_components/superagent/superagent.js"></script>
  <script type="text/javascript" src="../bower_components/reliefweb.js/lib/reliefweb.js"></script>
  <script type="text/javascript" src="../bower_components/beat-blocks/dist/beat-blocks.js"></script>
  <script type="text/javascript" src="../dist/rw-widgets.js"></script>
</head>
<body>
<div id="widget" class="widget"></div>

<script type="text/javascript">
  var countries = ["Iraq", "Syria"];

  riverWidget = BeatBlocks.widget('river', {
    template: Handlebars.templates['river.hbs'],
    filters: [
      {
        id: "situation-reports",
        title: "Situation reports by UN agencies",
        location: "http://reliefweb.int/updates?advanced-search=(C226.C122)_(F10)_(ST272)#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              "field": "country",
              "value": countries
            },
            {
              "field": "format.name",
              "value": "Situation Report"
            },
            {
              "field": "source.type.name",
              "value": "International Organization"
            }
          ]
        }
      },
      {
        id: "situation-reports-ngo",
        title: "Situation reports by NGOs",
        location: "http://reliefweb.int/updates?advanced-search=(C226.C122)_(F10)_(ST274)#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              "field": "country",
              "value": countries
            },
            {
              "field": "format.name",
              "value": "Situation Report"
            },
            {
              "field": "source.type.name",
              "value": "Non-governmental Organization"
            }
          ]
        }
      },
      {
        id: "analysis",
        title: "Analysis",
        location: "http://reliefweb.int/updates?advanced-search=(C226.C122)_(F3)#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              "field": "country",
              "value": countries
            },
            {
              "field": "format.name",
              "value": "Analysis"
            }
          ]
        }
      },
      {
        id: "assessments",
        title: "Assessments",
        location: "http://reliefweb.int/updates?advanced-search=(C226.C122)_(F5)#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              "field": "country",
              "value": countries
            },
            {
              "field": "format.name",
              "value": "Assessment"
            }
          ]
        }
      },
      {
        id: "appeals-contributions",
        title: "Appeals and contributions",
        location: "http://reliefweb.int/updates?advanced-search=(C226.C122)_(F4.T4589)_!(PC254)#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              "field": "country",
              "value": countries
            },
            {
              conditions: [
                {
                  "field": "format.name",
                  "value": "Assessment"
                },
                {
                  "field": "theme.name",
                  "value": "Contributions"
                }
              ]
            },
            {
              "field": "primary_country.name",
              "value": "World",
              "negate": true
            }
          ]
        }
      },
      {
        id: "aid-agency-news",
        title: "Aid agency news",
        location: "http://reliefweb.int/updates?advanced-search=(C226.C122)_(F8)_(ST274)#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              "field": "country",
              "value": countries
            },
            {
              "field": "format.name",
              "value": "News and Press Release"
            },
            {
              "field": "source.type.name",
              "value": "Non-governmental Organization"
            }
          ]
        }
      },
      {
        id: "media-news",
        title: "Media news",
        location: "http://reliefweb.int/updates?advanced-search=(C226.C122)_(ST273)#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              "field": "country",
              "value": countries
            },
            {
              "field": "source.type.name",
              "value": "Media"
            }
          ]
        }
      },
      {
        id: "evaluations-lessons-learned",
        title: "Evaluations and Lessons Learned",
        location: "http://reliefweb.int/updates?advanced-search=(C226.C122)_!(PC254)&format=6#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              conditions: [
                {
                  "field": "country",
                  "value": countries
                },
                {
                  "field": "primary_country.name",
                  "value": "World",
                  "negate": true
                }
              ]
            },
            {
              "field": "format.id",
              "value": "6"
            }
          ]
        }
      },
      {
        id: "reports-in-arabic",
        title: "Reports in Arabic",
        location: "http://reliefweb.int/updates?advanced-search=%28C226.C122%29&language=6876#content",
        filters: {
          operator: "AND",
          conditions: [
            {
              "field": "country",
              "value": countries
            },
            {
              "field": "language.name",
              "value": "Arabic"
            }
          ]
        }
      }
    ]
  });
  riverWidget.render('#widget');
</script>
<!-- Typekit -->
<script src="//use.typekit.net/pqs1mrp.js"></script>
<script>try{Typekit.load();}catch(e){}</script>
</body>
</html>