!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){!function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b["crisis-overview.hbs"]=a({1:function(a){var b,c=this.lambda,d=this.escapeExpression;return'  <div class="overview-widget--map">\n    <img src="'+d(c(null!=(b=null!=a?a.map:a)?b.src:b,a))+'" alt="'+d(c(null!=(b=null!=a?a.map:a)?b.alt:b,a))+'" />\n  </div>\n'},3:function(a,b,c,d){var e;return'  <div class="overview-widget--description">\n    <div class="accordion-set">\n'+(null!=(e=b.each.call(a,null!=a?a.content:a,{name:"each",hash:{},fn:this.program(4,d,0),inverse:this.noop,data:d}))?e:"")+"    </div>\n  </div>\n"},4:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression,j=this.lambda;return'      <input type="checkbox" id="'+i((f=null!=(f=b.key||d&&d.key)?f:g,typeof f===h?f.call(a,{name:"key",hash:{},data:d}):f))+'" class="accordion-set--check"'+(null!=(e=b["if"].call(a,d&&d.index,{name:"if",hash:{},fn:this.program(5,d,0),inverse:this.program(7,d,0),data:d}))?e:"")+'>\n      <label for="'+i((f=null!=(f=b.key||d&&d.key)?f:g,typeof f===h?f.call(a,{name:"key",hash:{},data:d}):f))+'" class="accordion-set--label"><h2>'+i(j(null!=a?a.title:a,a))+'</h2></label>\n      <div class="accordion-set--content" data-eq-pts="cols2: 500">\n        '+(null!=(e=j(null!=a?a.content:a,a))?e:"")+"\n      </div>\n"},5:function(){return""},7:function(){return' checked="checked"'},9:function(a,b,c,d){var e;return'  <div class="overview-widget--tabs tab-set">\n'+(null!=(e=b.each.call(a,null!=a?a.indicators:a,{name:"each",hash:{},fn:this.program(10,d,0),inverse:this.noop,data:d}))?e:"")+'    <div class="tab-set--content">\n'+(null!=(e=b.each.call(a,null!=a?a.indicators:a,{name:"each",hash:{},fn:this.program(12,d,0),inverse:this.noop,data:d}))?e:"")+"    </div>\n  </div>\n"},10:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'    <input type="radio" name="tab" id="tab-'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'" class="tab-set--tab"'+(null!=(e=b["if"].call(a,d&&d.index,{name:"if",hash:{},fn:this.program(5,d,0),inverse:this.program(7,d,0),data:d}))?e:"")+'/>\n    <label for="tab-'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'">'+i(this.lambda(null!=a?a.title:a,a))+"</label>\n"},12:function(a,b,c,d){var e,f,g=this.escapeExpression;return'      <div id="tab-body-'+g((f=null!=(f=b.index||d&&d.index)?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"index",hash:{},data:d}):f))+'" class="tab-set--body">\n        <h2>'+g(this.lambda(null!=a?a.title:a,a))+'</h2>\n        <i class="un-icon-crisis_population_displacement"></i>\n'+(null!=(e=b.each.call(a,null!=a?a.data:a,{name:"each",hash:{},fn:this.program(13,d,0),inverse:this.noop,data:d}))?e:"")+"      </div>\n"},13:function(a){var b=this.lambda,c=this.escapeExpression;return'        <div class="refugees">\n          <h3><span class="figure">'+c(b(null!=a?a.figure:a,a))+"</span> "+c(b(null!=a?a.quantifier:a,a))+"</h3>\n          <p>"+c(b(null!=a?a.description:a,a))+"</p>\n        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function";return'<div class="overview-widget">\n  <h1 class="widget-title"><span><i class="un-icon-crisis_conflict widget-title--icon"></i>'+(null!=(f=null!=(f=b.adjustedTitle||(null!=a?a.adjustedTitle:a))?f:g,e=typeof f===h?f.call(a,{name:"adjustedTitle",hash:{},data:d}):f)?e:"")+"</span></h1>\n"+(null!=(e=b["if"].call(a,null!=a?a.map:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+(null!=(e=b["if"].call(a,null!=a?a.content:a,{name:"if",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+(null!=(e=b["if"].call(a,null!=a?a.indicators:a,{name:"if",hash:{},fn:this.program(9,d,0),inverse:this.noop,data:d}))?e:"")+'  <footer class="overview-widget--sources">'+(null!=(f=null!=(f=b.dataSource||(null!=a?a.dataSource:a))?f:g,e=typeof f===h?f.call(a,{name:"dataSource",hash:{},data:d}):f)?e:"")+"</footer>\n</div>\n"},useData:!0})}()},{}],2:[function(a,b){(function(c){"use strict";function d(a){for(var b='<span class="word[[counter]]">[[word]]</span>',c=a.split(" "),d="",e=0;e<c.length;e++)d+=b.replace("[[counter]]",e+1).replace("[[word]]",c[e]);return d}var e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=("undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,"undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null),g="undefined"!=typeof window?window.numeral:"undefined"!=typeof c?c.numeral:null,h=("undefined"!=typeof window?window.BeatBlocks:"undefined"!=typeof c?c.BeatBlocks:null).helpers.widgetBase;a("./crisis-overview.hbs.js");var i=function(a){var b={title:"Crisis Overview",template:"crisis-overview.hbs",map:{src:"",alt:""}};a=a?a:{},b=e.defaults(a,b),h.call(this,b)};i.prototype=new h,i.prototype.compile=function(a,b){var c=this.config();this.config("adjustedTitle",d(c.title)),this.has("map.src")&&this.has("environment.content")?this.config("map.src",this.config("environment.content")+this.config("map.src")):console.log('Please verify that the "map.src" and "baseUrl" parameters are set in your config file.'),g.language("en-long");for(var e in c.indicators)for(var f in c.indicators[e].data){var h=c.indicators[e].data[f];if(null!==h.figure&&"object"==typeof h.figure&&"request"==h.figure.type){var i=g(h.figure.content[0].value).format("0.00 a").split(" ");this.config("indicators."+e+".data."+f+".figure",i[0]),h.quantifier||this.config("indicators."+e+".data.0.quantifier",i[1])}}this.template(function(c){a.classed("rw-widget",!0).html(c),b()})},i.prototype.link=function(){function a(){f(".accordion-set").find(".accordion-set--check").removeClass("is-active").end().find(".accordion-set--label").removeClass("is-active").end().find(".accordion-set--content").removeClass("is-active")}function b(a){f(a).removeClass("is-active").next(".accordion-set--label").removeClass("is-active").next(".accordion-set--content").removeClass("is-active")}function c(a){f(a).addClass("is-active").next(".accordion-set--label").addClass("is-active").next(".accordion-set--content").addClass("is-active")}f(".overview-widget a").attr("target","_blank"),f(".accordion-set--check").change(function(){f(this).is("[type=radio]")&&a(),f(this).is(":checked")?c(f(this)):b(f(this))}),c(f(".accordion-set--check:checked"))},b.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./crisis-overview.hbs.js":1}],3:[function(){!function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b["financial.hbs"]=a({1:function(a,b,c,d){var e;return'    <a href="" class="financial-widget--data-source">'+this.escapeExpression((e=null!=(e=b.dataItemTitle||(null!=a?a.dataItemTitle:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"dataItemTitle",hash:{},data:d}):e))+"</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h=b.helperMissing,i="function",j=this.escapeExpression,k='<div class="financial-widget">\n  <h1 class="widget-title"><span><i class="un-icon-activity_fund widget-title--icon"></i>'+(null!=(f=null!=(f=b.adjustedTitle||(null!=a?a.adjustedTitle:a))?f:h,e=typeof f===i?f.call(a,{name:"adjustedTitle",hash:{},data:d}):f)?e:"")+'</span></h1>\n  <div class="financial-widget--data-source-chooser">\n';return f=null!=(f=b.dataSources||(null!=a?a.dataSources:a))?f:h,g={name:"dataSources",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d},e=typeof f===i?f.call(a,g):f,b.dataSources||(e=b.blockHelperMissing.call(a,e,g)),null!=e&&(k+=e),k+'  </div>\n  <div class="financial-widget--time">\n    <h1>'+j((f=null!=(f=b.dataItemTitleCurrent||(null!=a?a.dataItemTitleCurrent:a))?f:h,typeof f===i?f.call(a,{name:"dataItemTitleCurrent",hash:{},data:d}):f))+'</h1>\n  </div>\n  <div class="financial-widget--percent-funded">\n    <div class="financial-widget--percent-funded--amount covered">$2.12B Funded <span class="percent">57% <span>covered</span></span>\n    </div>\n    <div class="financial-widget--percent-funded--amount requested ">$3.74B Requested</div>\n  </div>\n  <div class="financial-widget--cluster-funding">\n    <h2>Requirements &amp; Funding Per Cluster</h2>\n    <div id="finance-bubbles"></div>\n  </div>\n  <footer class="financial-widget--explore"><a href="'+j((f=null!=(f=b.fundingDocumentURL||(null!=a?a.fundingDocumentURL:a))?f:h,typeof f===i?f.call(a,{name:"fundingDocumentURL",hash:{},data:d}):f))+'" target="_blank">Explore Funding Documents via ReliefWeb</a></footer>\n  <footer class="financial-widget--sources">Data Source <cite><a href="'+j((f=null!=(f=b.dataSourceURL||(null!=a?a.dataSourceURL:a))?f:h,typeof f===i?f.call(a,{name:"dataSourceURL",hash:{},data:d}):f))+'" target="_blank">Financial Tracking Service</a></cite></footer>\n</div>\n'},useData:!0})}()},{}],4:[function(a,b){(function(c){"use strict";function d(a){for(var b='<span class="word[[counter]]">[[word]]</span>',c=a.split(" "),d="",e=0;e<c.length;e++)d+=b.replace("[[counter]]",e+1).replace("[[word]]",c[e]);return d}{var e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=("undefined"!=typeof window?window.BeatBlocks:"undefined"!=typeof c?c.BeatBlocks:null).helpers.widgetBase,g="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,h="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null;"undefined"!=typeof window?window.moment:"undefined"!=typeof c?c.moment:null}a("./financial.hbs.js");var i=function(a){var b={title:"Financial Support",template:"financial.hbs"};a=a?a:{},b=e.defaults(a,b),f.call(this,b)};i.prototype=new f,i.prototype.compile=function(a,b){function c(a){var b=a/1e9;return b>1?b=b.toFixed(2)+" B":(b=a/1e6,b=b.toFixed(2)+" M"),b}var e=this,f={},h=e.config("dataSources");h.forEach(function(a){var b,d,e;b=d=e=0,g.each(a.clusters.content,function(){b+=this.current_requirement,d+=this.pledges,e+=this.funding});var h=e/b*100;h=h.toFixed(2),b=c(b),d=c(d),e=c(e),f[a.dataItemTitle]={currentRequirementTotal:b,pledgesTotal:d,fundingTotal:e,percentageRaised:h}}),this.config("calculatedDataSources",f);var i=this.config();this.config("adjustedTitle",d(i.title)),e.template(function(c){a.classed("rw-widget",!0).html(c),b()});var j=h[0].dataSourceURL;g(".financial-widget--sources a").attr("href",j)},i.prototype.link=function(a){function b(){d(),c(),g(".financial-widget--data-source-chooser :first-child",q).toggleClass("active"),f(),i(g(".financial-widget--data-source",q).first().text()),g(".financial-widget--data-source",q).click(function(a){a.preventDefault();var b=this.text;t.currentSection=e.findKey(p.dataSources,function(a){return a.dataItemTitle==b}),p.dataSources[t.currentSection].clusters.content.length<2?g(".financial-widget--cluster-funding",q).hide():g(".financial-widget--cluster-funding",q).show(),c(),i(b),l(b),g(".financial-widget--data-source").removeClass("active"),g(this).toggleClass("active");var d=p.dataSources[t.currentSection].dataSourceURL;g(".financial-widget--sources a").attr("href",d)})}function c(){function b(a){var b=a.r+16,c=a.x-b,d=a.x+b,e=a.y-b,f=a.y+b;return function(b,g,h,i,j){if(b.point&&b.point!==a){var k=a.x-b.point.x,l=a.y-b.point.y,m=Math.sqrt(k*k+l*l),n=a.r+b.point.r;n+="horizontal"==t.direction?40:20,n>m&&(m=(m-n)/m*.5,a.x-=k*=m,a.y-=l*=m,b.point.x+=k,b.point.y+=l)}return g>d||c>i||h>f||e>j}}function c(a){var b,c=h.format("%"),e="<div id='detail-overlay'><div class='detail--block'><div class='detail--info'><div class='detail--text'><h2 class='detail--title'></h2></div></div></div></div>",i=g("#finance-bubbles",q).append(e);g(".detail--info",i).width(o>l?l-80:o-20),g(".detail--info",i).height(o>l?l-80:o-20),g(".detail--title",i).text(m(a.title));var j=f(a.title);j&&g(".detail--text",i).prepend("<img class='detail--icon' src='/images/financial-icon--"+j+".svg' />");var k=g(".detail--text",i);k.append("<div>"+c(a.fundingPercentage)+" funded</div>"),b=h.formatPrefix(a.requested),k.append("<div>"+b.scale(a.requested).toFixed(2)+b.symbol+" Requested</div>"),b=h.formatPrefix(a.funded),k.append("<div>"+b.scale(a.funded).toFixed(2)+b.symbol+" Funded</div>"),g("#detail-overlay",i).append("<div class='detail--click'></div>").click(d)}function d(){h.select("#detail-overlay").remove()}function f(a){var b=e.result(e.find(s,function(b){return b.original==a}),"icon");return b?b:void 0}function i(a,b){a.each(function(){var a,c=h.select(this),d=c.text().split(/\s+/).reverse(),e=[],f=0,g=20,i=c.attr("y"),j=0,k=c.text(null).append("tspan").attr("x",0).attr("y",i).attr("dy",j+"em");for(a=d.pop();a;)e.push(a),k.text(e.join(" ")),k.node().getComputedTextLength()>b&&(e.pop(),k.text(e.join(" ")),e=[a],k=c.append("tspan").attr("x",0).attr("y",i).attr("y",++f*g+j+"px").text(a)),a=d.pop()})}var j=p.dataSources[t.currentSection].clusters.content;if(g("#finance-bubbles",q).empty(),!(j.length<=1)){var k={top:50,bottom:50,left:20,right:20},l=g("#finance-bubbles",q).width()-k.left-k.right,o="horizontal"==t.direction?500:680;o=o-k.top-k.bottom;var r="horizontal"==t.direction?25e3:4e3,u=h.scale.linear().domain(h.extent(j,function(a){return a.funding})).range([1e3,r]),v="horizontal"==t.direction?[0,l]:[o,0],w=h.scale.linear().domain([0,1]).range(v).clamp(!0),x=function(a){return a.r<50},y=function(){var a=!1,b=t.direction;l=g("#finance-bubbles",q).width(),A.attr("width",l),l=l-k.left-k.right,t.direction=g("#finance-bubbles",q).width()>650?"horizontal":"vertical",a=t.direction!==b;var c="horizontal"==t.direction?25e3:4e3;u.range([1e3,c]),F.innerTickSize(-l),a&&(o="horizontal"==t.direction?500:680,A.attr("height",o),o=o-k.top-k.bottom,E.innerTickSize(-o),z.forEach(function(a,b){z[b].r=Math.sqrt(u(a.funded)/Math.PI),z[b].x="horizontal"==t.direction?w(a.fundingPercentage):l/2+(4*Math.random()-2),z[b].y="horizontal"==t.direction?o/2+(4*Math.random()-2):w(a.fundingPercentage)}),K.classed({small:x}),K.selectAll("circle").attr({r:function(a){return a.r}}),K.selectAll("text").attr({transform:function(a){return x(a)?"translate(0,"+(a.r+16)+")":""}}),K.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})),J&&(J.size([l,o]),J.start()),g(".axis.y .tick text").attr("transform","translate(0, -10)");var d=l/2-52,e=d+110;"horizontal"==t.direction?(w.range([0,l]),G.select(".grid.x").style("display","block").call(E),G.select(".axis.x-top").style("display","block").call(B),G.select(".axis.x").attr("transform","translate(0,"+o+")").style("display","block").call(C),G.select(".label.x-top").attr("transform","translate("+d+",-30)").style("display","block"),G.select(".label.x-bottom").attr("transform","translate("+d+","+(o+45)+")").style("display","block"),G.select(".triangle.triangle-top").attr("transform","translate("+e+", -43)").style("display","block"),G.select(".triangle.triangle-bottom").attr("transform","translate("+e+","+(o+32)+")").style("display","block"),G.select(".axis.y").style("display","none"),G.select(".grid.y").style("display","none")):(w.range([o,0]),G.select(".axis.x-top").style("display","none"),G.select(".axis.x").style("display","none"),G.select(".grid.x").style("display","none"),G.select(".label.x-top").style("display","none"),G.select(".label.x-bottom").style("display","none"),G.select(".triangle.triangle-top").style("display","none"),G.select(".triangle.triangle-bottom").style("display","none"),G.select(".axis.y").style("display","block").call(D),G.select(".axis.y .domain").style("display","none"),G.select(".grid.y").style("display","block").call(F))};g(window).resize(function(){y()});var z=h.range(j.length).map(function(a){var b=j[a].current_requirement?j[a].funding/j[a].current_requirement:0;return{title:j[a].name,fundingPercentage:b,requested:j[a].current_requirement,funded:j[a].funding,r:Math.sqrt(u(j[a].funding)/Math.PI),x:"horizontal"==t.direction?w(b):l/2+(4*Math.random()-2),y:"horizontal"==t.direction?o/2+(4*Math.random()-2):w(b)}}).sort(function(a,b){return b.fundingPercentage-a.fundingPercentage}),A=a.select("#finance-bubbles").append("svg").attr({width:l+k.left+k.right,height:o+k.top+k.bottom}),B=h.svg.axis().scale(w).tickValues([0,.25,.5,.75,1]).tickFormat(function(a){return 100*a+"%"}).orient("top"),C=h.svg.axis().scale(w).tickValues([0,.25,.5,.75,1]).tickFormat(function(a){return 100*a+"%"}).orient("bottom"),D=h.svg.axis().scale(w).tickValues([0,.25,.5,.75,1]).tickFormat(function(a){return 1==a?"100% Funded":100*a+"%"}).orient("right"),E=h.svg.axis().scale(w).orient("top").tickFormat("").innerTickSize(-o).outerTickSize(0).tickValues([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]),F=h.svg.axis().scale(w).orient("left").tickFormat("").innerTickSize(-l).outerTickSize(0).tickValues([0,.25,.5,.75,1]),G=A.append("g").attr("transform","translate("+k.left+","+k.top+")");G.append("g").classed({x:!0,axis:!0}).attr("transform","translate(0,"+o+")").call(C),G.append("g").classed({"x-top":!0,axis:!0}).attr("transform","translate(0,0)").call(B);var H=l/2-52,I=H+110;G.append("text").classed({"x-top":!0,label:!0}).attr("transform","translate("+H+",-30)").text("Per Cent Funded"),G.append("path").classed({triangle:!0,"triangle-top":!0}).attr("transform","translate("+I+", -43)").attr("d","M0,16 L0,0 L12,8 L0,16 Z").attr("fill","#D8D8D8"),G.append("text").classed({"x-bottom":!0,label:!0}).attr("transform","translate("+H+","+(o+45)+")").text("Per Cent Funded"),G.append("path").classed({triangle:!0,"triangle-bottom":!0}).attr("transform","translate("+I+","+(o+32)+")").attr("d","M0,16 L0,0 L12,8 L0,16 Z").attr("fill","#D8D8D8"),G.append("g").classed({y:!0,axis:!0}).attr("transform","translate(0,0)").call(D),G.append("g").classed({x:!0,grid:!0}).attr("transform","translate(0,0)").call(E),G.append("g").classed({y:!0,grid:!0}).attr("transform","translate(0,0)").call(F);var J=h.layout.force().gravity(0).friction(.8).nodes(z).size([l,o]),K=G.selectAll(".cluster-bubble").data(z).enter().append("g").classed({"cluster-bubble":!0,small:x}).style({cursor:"pointer"}).attr("transform",function(a){return"translate("+a.x+","+a.y+")"}).on("click",function(a){c(a)});K.append("circle").attr({r:function(a){return a.r}}),K.append("text").text(function(a){return n(a.title)}).style("text-transform","capitalize").attr({"text-anchor":"middle",transform:function(a){return x(a)?"translate(0,"+(a.r+16)+")":""}}),K.selectAll("text").call(i,200),y(),J.on("tick",function(a){var c=h.geom.quadtree(z),d=.05*a.alpha;z.forEach(function(a){"horizontal"==t.direction?(a.x+=(w(a.fundingPercentage)-a.x)*d,a.y=a.y>o/2?a.y-3*d:a.y+3*d):(a.y+=(w(a.fundingPercentage)-a.y)*d,a.x=a.x>l/2?a.x-d:a.x+d),a.x+a.r>l?a.x-=1200*d:(a.x-a.r<0&&"horizontal"==t.direction||a.x-a.r<40)&&(a.x+=1200*d),a.y+a.r+20>o?a.y-=1200*d:a.y-a.r<0&&(a.y+=1200*d),c.visit(b(a))}),K.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})})}}function d(){}function f(){var a=Object.keys(r)[0];l(a)}function i(a){g(".financial-widget--time h1").text(a)}function j(a,b){var c="$"+a+' Funded <span class="percent">'+b+"% <span>covered</span></span>";g(".financial-widget--percent-funded .covered").width(b-20+"%").html(c),20>b&&g(".financial-widget--percent-funded--amount .percent").addClass("aligned-right")}function k(a){g(".financial-widget--percent-funded .requested").html("$"+a+" Requested")}function l(a){var b=r[a];j(b.fundingTotal,b.percentageRaised),k(b.currentRequirementTotal)}function m(a){var b=e.result(e.find(s,function(b){return b.original==a}),"long");return b?b:a}function n(a){var b=e.result(e.find(s,function(b){return b.original==a}),"short");return b?b:a}var o=this,p=o.config(),q=g(a[0][0]),r=p.calculatedDataSources,s=o.config("labelMapping"),t={direction:g("#finance-bubbles").width()>650?"horizontal":"vertical",currentSection:0};b()},b.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./financial.hbs.js":3}],5:[function(){!function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b["river-item.hbs"]=a({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'<li class="filters-content--item">\n  <div class="filters-content--item-date">'+h((e=null!=(e=b.item_date||(null!=a?a.item_date:a))?e:f,typeof e===g?e.call(a,{name:"item_date",hash:{},data:d}):e))+'</div>\n  <h3 class="filters-content--item-title">'+h((e=null!=(e=b.item_title||(null!=a?a.item_title:a))?e:f,typeof e===g?e.call(a,{name:"item_title",hash:{},data:d}):e))+'</h3>\n  <div class="filters-content--item-source">'+h((e=null!=(e=b.item_source||(null!=a?a.item_source:a))?e:f,typeof e===g?e.call(a,{name:"item_source",hash:{},data:d}):e))+"</div>\n</li>"},useData:!0})}()},{}],6:[function(){!function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b["river.hbs"]=a({1:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'        <input type="radio" name="river" id="'+g(f(null!=a?a.id:a,a))+'" class="accordion-set--check" />\n        <label for="'+g(f(null!=a?a.id:a,a))+'" class="accordion-set--label">'+g(f(null!=a?a.title:a,a))+'</label>\n        <div id="'+g(f(null!=a?a.id:a,a))+'-accordion" class="accordion-set--content">\n          <div class="widget-river--filters-content">\n            <h2 class="filters-content--title">'+g(f(null!=a?a.title:a,a))+'</h2>\n            <ul class="filters-content--items">\n            </ul>\n            <a class="filters-content--more btn" href="'+g((e=null!=(e=b.location||(null!=a?a.location:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"location",hash:{},data:d}):e))+'" target="_blank">View full list on ReliefWeb</a>\n          </div>\n        </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f;return'<div class="widget-river" id="widget-river">\n  <h1 class="widget-title"><span><i class="un-icon-activity_reporting widget-title--icon"></i>'+(null!=(f=null!=(f=b.adjustedTitle||(null!=a?a.adjustedTitle:a))?f:b.helperMissing,e="function"==typeof f?f.call(a,{name:"adjustedTitle",hash:{},data:d}):f)?e:"")+'</span></h1>\n  <div class="widget-river--results clearfix">\n\n    <div class="accordion-set widget-river--filters results--item--reports">\n      <h5 class="widget-river--filters--title">Filter Results:  <span class="tab">Reports</span> <span class="close"></span></h5>\n\n'+(null!=(e=b.each.call(a,null!=a?a.filters:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"    </div>\n  </div>\n</div>\n"},useData:!0})}()},{}],7:[function(a,b){(function(c){"use strict";var d="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,e=("undefined"!=typeof window?window.BeatBlocks:"undefined"!=typeof c?c.BeatBlocks:null).helpers.widgetBase,f="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,g="undefined"!=typeof window?window.moment:"undefined"!=typeof c?c.moment:null,h="undefined"!=typeof window?window.reliefweb:"undefined"!=typeof c?c.reliefweb:null,i=("undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,"undefined"!=typeof window?window.Handlebars:"undefined"!=typeof c?c.Handlebars:null);a("./river.hbs.js"),a("./river-item.hbs.js");var j=function(a){var b={title:"More From Reliefweb",template:"river.hbs"};a=a?a:{},b=d.defaults(a,b),e.call(this,b)};j.prototype=new e,j.prototype.compile=function(a,b){function c(a){var b='<span class="word[[counter]]">[[word]]</span>',c=a.split(" "),d="";return d=b.replace("[[counter]]",1).replace("[[word]]",c.shift()),d+=b.replace("[[counter]]",2).replace("[[word]]",c.join(" "))}var d=this,e=this.config();this.config("adjustedTitle",c(e.title)),d.template(function(c){a.classed("rw-widget",!0).html(c),b()})},j.prototype.link=function(a){function b(){n.forEach(function(a){c(a.id,a.data.content)}),l.find(".accordion-set--label").click(function(){if(f(window).width()>640){var a=this;setTimeout(function(){var b=f("#"+f(a).attr("for")+"-accordion"),c=b.find(".widget-river--filters-content").height()+75;f(".widget-river--results").height(c)},1)}}),k(f(".accordion-set--check:checked"))}function c(a,b){if(b){var c=d.map(b.data,function(a){return{item_date:g(a.fields.date.created,g.ISO_8601).format("DD MMMM YYYY"),item_title:a.fields.title,item_source:a.fields.source[0].shortname}}),e=d.reduce(c,function(a,b){return a+i.templates["river-item.hbs"](b)},"");f("#"+a+"-accordion .filters-content--items",l).empty().html(e)}}function e(){f(".accordion-set").find(".accordion-set--check").removeClass("is-active").end().find(".accordion-set--label").removeClass("is-active").end().find(".accordion-set--content").removeClass("is-active")}function j(a){f(a).removeClass("is-active").next(".accordion-set--label").removeClass("is-active").next(".accordion-set--content").removeClass("is-active")}function k(a){f(a).addClass("is-active").next(".accordion-set--label").addClass("is-active").next(".accordion-set--content").addClass("is-active")}{var l=f(a[0][0]),m=this,n=m.config("filters");h.client()}f(".accordion-set--check").change(function(){f(this).is("[type=radio]")&&e(),f(this).is(":checked")?k(f(this)):j(f(this))}),b()},b.exports=j}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./river-item.hbs.js":5,"./river.hbs.js":6}],8:[function(){!function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b["timeline--dropdown-item.hbs"]=a({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'<li class="timeline-widget-dropdown--list-item" data-slide="'+h((e=null!=(e=b.index||(null!=a?a.index:a))?e:f,typeof e===g?e.call(a,{name:"index",hash:{},data:d}):e))+'" data-rw-id="'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===g?e.call(a,{name:"id",hash:{},data:d}):e))+'">\n  <div class="timeline-widget-dropdown--item">\n    <div class="timeline-widget-dropdown--item-date">'+h((e=null!=(e=b["date-day"]||(null!=a?a["date-day"]:a))?e:f,typeof e===g?e.call(a,{name:"date-day",hash:{},data:d}):e))+" "+h((e=null!=(e=b["date-month"]||(null!=a?a["date-month"]:a))?e:f,typeof e===g?e.call(a,{name:"date-month",hash:{},data:d}):e))+" "+h((e=null!=(e=b["date-year"]||(null!=a?a["date-year"]:a))?e:f,typeof e===g?e.call(a,{name:"date-year",hash:{},data:d}):e))+'</div>\n    <div class="timeline-widget-dropdown--item-desc">'+h((e=null!=(e=b["short-desc"]||(null!=a?a["short-desc"]:a))?e:f,typeof e===g?e.call(a,{name:"short-desc",hash:{},data:d}):e))+"</div>\n  </div>\n</li>"},useData:!0})}()},{}],9:[function(){!function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b["timeline--frame-item.hbs"]=a({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=this.escapeExpression,h=this.lambda;return'<li class="timeline-widget-item" data-rw-id="'+g((f=null!=(f=b.id||(null!=a?a.id:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"id",hash:{},data:d}):f))+'">\n  <div class="timeline-widget-item--header">\n    <div class="timeline-widget-item--headline">\n      <div class="timeline-widget-item--category">Ocha <div class="arrow"></div></div> <div class="timeline-widget-item--date">'+g(h(null!=a?a["date-full"]:a,a))+'</div>\n    </div>\n    <h1 class="timeline-widget-item--title">'+g(h(null!=a?a.title:a,a))+'</h1>\n  </div>\n  <div class="timeline-widget-item--content">\n    <div class="timeline-widget-item--image">\n      <div class="timeline-widget-item--image--icons">\n        <a class="timeline-widget-item--image--view-more"><img src="../../images/eye-img--yellow.png"></a>\n        <a class="timeline-widget-item--image--country">'+g(h(null!=a?a.country:a,a))+'</a>\n      </div>\n      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="'+g(h(null!=a?a["img-src"]:a,a))+'" />\n    </div>\n    <div class="timeline-widget-item--description">\n      '+(null!=(e=h(null!=a?a["long-desc"]:a,a))?e:"")+'\n      <div class="timeline-widget-item-link">\n        <a class="btn" href="'+g(h(null!=a?a.url:a,a))+'" target="_blank"><span class="un-icon-product_type_report"></span> Read full report</a>\n      </div>\n    </div>\n  </div>\n</li>'},useData:!0})}()},{}],10:[function(){!function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b["timeline.hbs"]=a({1:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'              <li class="timeline-widget-dropdown--list-item" data-slide="'+h((e=null!=(e=b.index||d&&d.index)?e:f,typeof e===g?e.call(a,{name:"index",hash:{},data:d}):e))+'" data-rw-id="'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===g?e.call(a,{name:"id",hash:{},data:d}):e))+'">\n                <div class="timeline-widget-dropdown--item">\n                  <div class="timeline-widget-dropdown--item-date">'+h((e=null!=(e=b["date-day"]||(null!=a?a["date-day"]:a))?e:f,typeof e===g?e.call(a,{name:"date-day",hash:{},data:d}):e))+" "+h((e=null!=(e=b["date-month"]||(null!=a?a["date-month"]:a))?e:f,typeof e===g?e.call(a,{name:"date-month",hash:{},data:d}):e))+" "+h((e=null!=(e=b["date-year"]||(null!=a?a["date-year"]:a))?e:f,typeof e===g?e.call(a,{name:"date-year",hash:{},data:d}):e))+'</div>\n                  <div class="timeline-widget-dropdown--item-desc">'+h((e=null!=(e=b["short-desc"]||(null!=a?a["short-desc"]:a))?e:f,typeof e===g?e.call(a,{name:"short-desc",hash:{},data:d}):e))+"</div>\n                </div>\n              </li>\n"},3:function(a,b,c,d){var e,f,g=this.escapeExpression,h=this.lambda;return'          <li class="timeline-widget-item" data-rw-id="'+g((f=null!=(f=b.id||(null!=a?a.id:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"id",hash:{},data:d}):f))+'">\n            <div class="timeline-widget-item--header">\n              <div class="timeline-widget-item--headline">\n                <div class="timeline-widget-item--category">Ocha <div class="arrow"></div></div> <div class="timeline-widget-item--date">'+g(h(null!=a?a["date-full"]:a,a))+'</div>\n              </div>\n              <h1 class="timeline-widget-item--title">'+g(h(null!=a?a.title:a,a))+'</h1>\n            </div>\n            <div class="timeline-widget-item--content">\n                  <div class="timeline-widget-item--image">\n                    <div class="timeline-widget-item--image--icons">\n                      <a class="timeline-widget-item--image--view-more"><img src="../../images/eye-img--yellow.png"></a>\n                      <a class="timeline-widget-item--image--country">'+g(h(null!=a?a.country:a,a))+'</a>\n                    </div>\n                    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="'+g(h(null!=a?a["img-src"]:a,a))+'" />\n                  </div>\n              <div class="timeline-widget-item--description">\n                  '+(null!=(e=h(null!=a?a["long-desc"]:a,a))?e:"")+'\n                <div class="timeline-widget-item-link">\n                  <a class="btn" href="'+g(h(null!=a?a.url:a,a))+'" target="_blank"><span class="un-icon-product_type_report"></span> Read full report</a>\n                </div>\n              </div>\n            </div>\n          </li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h=b.helperMissing,i="function",j='<div class="timeline-widget">\n  <h1 class="widget-title"><span><i class="un-icon-product_type_timeline widget-title--icon-custom widget-title--icon"></i>'+(null!=(f=null!=(f=b.adjustedTitle||(null!=a?a.adjustedTitle:a))?f:h,e=typeof f===i?f.call(a,{name:"adjustedTitle",hash:{},data:d}):f)?e:"")+'</span></h1>\n  <div class="timeline-widget--controls">\n    <button class="prev"><div class="arrow"></div></button>\n    <button class="next"><div class="arrow"></div></button>\n  </div>\n\n  <div class="timeline-widget--dropdown">\n    <div class="timeline-widget--dropdown-heading">\n      <span class="button-arrow"></span> Timeline - Calendar</div>\n    <div class="clear"></div>\n    <div class="timeline-widget--dropdown--wrapper">\n      <div class="timeline-widget--dropdown-controls">\n        <div class="form-select">\n          <select name="year">\n          </select>\n        </div>\n        <div class="form-select">\n          <select name="month">\n          </select>\n        </div>\n        <button class="form-today">Today</button>\n        <span class="close"></span>\n      </div>\n      <div class="timeline-widget--dropdown--container">\n        <ul class="slidee">\n';
return f=null!=(f=b["timeline-items"]||(null!=a?a["timeline-items"]:a))?f:h,g={name:"timeline-items",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d},e=typeof f===i?f.call(a,g):f,b["timeline-items"]||(e=b.blockHelperMissing.call(a,e,g)),null!=e&&(j+=e),j+'          <li class="timeline-widget--dropdown--end-of-line">No More Entries</li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <div class="timeline-widget--frames">\n    <ul class="slidee">\n'+(null!=(e=b.each.call(a,null!=a?a["timeline-items"]:a,{name:"each",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+'    </ul>\n  </div>\n  <div class="clear-both"></div>\n</div>'},useData:!0})}()},{}],11:[function(a,b){(function(c){"use strict";var d="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,e=("undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,("undefined"!=typeof window?window.BeatBlocks:"undefined"!=typeof c?c.BeatBlocks:null).helpers.widgetBase),f="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,g="undefined"!=typeof window?window.moment:"undefined"!=typeof c?c.moment:null,h="undefined"!=typeof window?window.reliefweb:"undefined"!=typeof c?c.reliefweb:null,i="undefined"!=typeof window?window.Handlebars:"undefined"!=typeof c?c.Handlebars:null;a("./timeline.hbs.js"),a("./timeline--frame-item.hbs.js"),a("./timeline--dropdown-item.hbs.js");var j=function(a){var b={title:"Crisis Timeline",template:"timeline.hbs",countries:[],limit:100};a=a?a:{},b=d.defaults(a,b),e.call(this,b)};j.prototype=new e,j.prototype.getData=function(a,b){function c(a,b){var c=d.map(a,function(a){var b={title:a.fields.headline.title,country:a.fields.primary_country.name,"long-desc":a.fields.headline.summary,"short-desc":a.fields.headline.title,url:a.fields.url,id:a.id};a.fields.headline.image?b["img-src"]=a.fields.headline.image["url-large"]:e.has("emptyImage")&&e.has("environment.content")?b["img-src"]=e.config("environment.content")+e.config("emptyImage"):console.log('Please verify that the "emptyImage" and "baseUrl" parameters are set in your config file.');var c=g(a.fields.date.original,g.ISO_8601);return b["date-full"]=c.format("DD MMM YYYY"),b["date-month"]=c.format("MMMM"),b["date-day"]=c.format("DD"),b["date-year"]=c.format("YYYY"),b});b(c)}var e=this;if(0===a)return c(e.config("items.content.data"),b),!0;var f=e.config("items.path").split("/");f.shift(),f=f.join("/");var i=e.config("items.payload");delete i.facets;var j=h.client({host:e.config("environment.sources.reliefweb").replace(/.*?:\/\//g,"")});j.post(f).send(i).send({offset:a}).end(function(a,d){a||c(d.body.data,b)})},j.prototype.compile=function(a,b){function c(a){for(var b='<span class="word[[counter]]">[[word]]</span>',c=a.split(" "),d="",e=0;e<c.length;e++)d+=b.replace("[[counter]]",e+1).replace("[[word]]",c[e]);return d}var e=this,f=this.config();this.config("adjustedTitle",c(f.title));var h=e.config("items.content.embedded.facets");e.config("dataRanges",d.map(h["date.original"].data,function(a){return{count:a.count,value:g(a.value,g.ISO_8601())}})),e.getData(0,function(c){c.reverse(),e.config("timeline-items",c),e.template(function(c){a.classed("rw-widget",!0).html(c),b()})})},j.prototype.link=function(a){function b(a){var b,c,d=a?a:g(),e=5529600;return y.content.forEach(function(a){var f=g(a["date-full"],"DD MMM YYYY"),h=Math.abs(d.unix()-f.unix());d.month()!==f.month()&&(h+=e),(void 0===c||c>h)&&(c=Math.abs(d.unix()-f.unix()),b=a.id)}),b}function c(){x.activeId=b();var a=d.find(y.content,function(a){return a.id==x.activeId}),c=g(a["date-full"],"DD MMM YYYY");x.currentYear=c.format("YYYY"),x.currentMonth=c.format("M"),x.currentFormatted=c.format("YYYY MMMM"),e(),f("select",z).selectric(),r=f(".timeline-widget--frames",z),s=f(".timeline-widget-item",z),t="40px",k(r.width()),s.css({marginRight:t}),f(window).resize(function(){k(r.width())}),f(window).on("orientationchange",function(){k(r.width())}),u=new Sly(r,{horizontal:1,itemNav:"forceCentered",smart:0,activateMiddle:1,touchDragging:1,releaseSwing:1,startAt:0,speed:200,elasticBounds:1,dragHandle:1,dynamicHandle:1,clickBar:1,scrollHijack:0,prev:f(".prev"),next:f(".next")}).init(),v=new Sly(f(".timeline-widget--dropdown--container",z),{itemNav:"basic",smart:0,mouseDragging:1,touchDragging:1,releaseSwing:1,scrollBy:1,startAt:0,speed:300,elasticBounds:1,dragHandle:1,dynamicHandle:1,clickBar:1}).init();var i=setInterval(function(){if(f("body").height()>10){clearInterval(i);var a=f('.timeline-widget-dropdown--list-item[data-rw-id="'+x.activeId+'"]');if(a){var b=v.getPos(a);v.slideTo(b.center)}}},750);h()}function e(){var a=g.months(),b=g.monthsShort("-MMM-"),c=f('select[name="month"]',z);a.forEach(function(a,d){c.append('<option value="'+b[d]+'">'+a+"</option>")});for(var d=f('select[name="year"]',z),e=x.currentYear,h=0;5>h;h++)d.append('<option value="'+e+'">'+e+"</option>"),e--}function h(){m(),j(x.activeId);var a=d.find(y.content,function(a){return a.id==x.activeId}),b=g(a["date-full"],"DD MMM YYYY");x.currentYear=b.format("YYYY"),x.currentMonth=b.format("M"),x.currentFormatted=b.format("YYYY MMMM"),f('select[name="month"]',z).val(b.format("MMM")).selectric("refresh"),f('select[name="year"]',z).val(b.format("YYYY")).selectric("refresh")}function j(a){var b=f('.timeline-widget-item[data-rw-id="'+a+'"]');if(b){var c=u.getPos(b);u.activate(b),u.slideTo(c.center)}var d=f('.timeline-widget-dropdown--list-item[data-rw-id="'+a+'"]');if(d){var e=v.getPos(d);v.activate(d,!0),v.slideTo(e.center)}}function k(){var a=0;90==Math.abs(window.orientation)?(a=window.screen.width<window.screen.height?window.screen.height:window.screen.width,f(".timeline-widget",z).width(a)):0===window.orientation&&(a=window.screen.width>window.screen.height?window.screen.height:window.screen.width,f(".timeline-widget",z).width(a)),s.width(r.width()),setTimeout(function(){u.reload(),v.reload()},1)}function l(){var a=f('select[name="month"]',z).val()+" "+f('select[name="year"]',z).val(),c=q(g(a,"MMM YYYY"))-5;c=5>c?0:c,w.getData(c,function(c){var e=c.reverse();y.content=e,y.content=d.uniq(y.content,"id");var f=b(g(a,"MMM YYYY"));x.activeId=f,o(),p(),u.reload(),v.reload(),h()})}function m(){var a=f('.timeline-widget-item[data-rw-id="'+x.activeId+'"] img').last();a.attr("src",a.data("src"))}function n(){w.getData(x.range[1],function(a){x.range[1]+=50,a=a.reverse(),y.content=a.concat(y.content),y.content=d.uniq(y.content,"id"),o(),p(),h()})}function o(){var a="";y.content.forEach(function(b,c){b.index=c,a+=i.templates["timeline--dropdown-item.hbs"](b)}),f(".timeline-widget--dropdown--container .timeline-widget-dropdown--list-item").remove(),f(".timeline-widget--dropdown--container .timeline-widget--dropdown--end-of-line").first().before(a),f(".timeline-widget-dropdown--list-item",z).click(function(){f(this).data("rwId")==f(v.items[0].el).data("rwId")?(x.activeId=f(this).data("rwId"),n()):(x.activeId=f(this).data("rwId"),h()),f(".timeline-widget--dropdown--wrapper").removeClass("open")}),v.reload()}function p(){var a="";y.content.forEach(function(b){a+=i.templates["timeline--frame-item.hbs"](b)}),f(".timeline-widget--frames .slidee",z).empty().html(a),f(".timeline-widget-frames li a").attr("target","_blank"),s=f(".timeline-widget-item",z),s.width(r.width()),s.css({marginRight:t}),u.reload()}function q(a){var b=d.filter(y.rangePerMonth,function(b){return b.value.isAfter(a)}),c=d.reduce(b,function(a,b){return a+b.count},0);return c}var r,s,t,u,v,w=this,x={currentIndex:null,currentYear:null,currentMonth:null,currentFormatted:null,requestedDate:null,range:[0,50],activeId:null},y={rangePerMonth:this.config("dataRanges"),content:this.config("timeline-items")},z=f(a[0][0]);f(".timeline-widget-frames li a",z).attr("target","_blank"),c(),f(".timeline-widget-dropdown--list-item",z).click(function(){f(this).data("rwId")==f(v.items[0].el).data("rwId")?(x.activeId=f(this).data("rwId"),n()):(x.activeId=f(this).data("rwId"),h()),f(".timeline-widget--dropdown--wrapper").removeClass("open")}),f(".timeline-widget--dropdown-heading, .close",z).click(function(){f(".timeline-widget--dropdown--wrapper").toggleClass("open"),v.reload()}),f(".timeline-widget-dropdown--item",z).click(function(){f(".timeline-widget--dropdown--wrapper").removeClass("open")}),f(".timeline-widget--dropdown-controls select",z).on("change",function(){l()}),f(".next").on("click",function(){var a=f('.timeline-widget-item[data-rw-id="'+x.activeId+'"]'),b=u.getIndex(a);b<u.items.length-1&&(x.activeId=f(u.items[b+1].el).data("rwId"),h())}),f(".prev").on("click",function(){var a=f('.timeline-widget-item[data-rw-id="'+x.activeId+'"]'),b=u.getIndex(a);b>0&&(x.activeId=f(u.items[b-1].el).data("rwId"),h())}),f(".form-today",z).click(function(){var a=g(),c=q(a)-5;c=5>c?0:c,w.getData(c,function(c){var e=c.reverse();y.content=e,y.content=d.uniq(y.content,"id");var f=b(a);x.activeId=f,o(),p(),u.reload(),v.reload(),h()})})},b.exports=j}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./timeline--dropdown-item.hbs.js":8,"./timeline--frame-item.hbs.js":9,"./timeline.hbs.js":10}],12:[function(a,b){(function(c){"use strict";var d="undefined"!=typeof window?window.BeatBlocks:"undefined"!=typeof c?c.BeatBlocks:null,e="undefined"!=typeof window?window.numeral:"undefined"!=typeof c?c.numeral:null,f=a("./components/crisis-overview/crisis-overview"),g=a("./components/river.ver2/river"),h=a("./components/timeline/timeline"),i=a("./components/financial/financial");d.addWidgetToRegistry("crisis-overview",f),d.addWidgetToRegistry("river",g),d.addWidgetToRegistry("timeline",h),d.addWidgetToRegistry("financial",i),e.language("en-long",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"thousand",million:"million",billion:"billion",trillion:"trillion"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),b.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./components/crisis-overview/crisis-overview":2,"./components/financial/financial":4,"./components/river.ver2/river":7,"./components/timeline/timeline":11}]},{},[12]);